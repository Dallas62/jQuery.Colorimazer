(function(c){var a=(function(){var e=(function(){var h=function(o,A,y){var k,u,x,n,w,m,l,z;if(A===0){k=u=x=y}else{o/=60;n=Math.floor(o);w=o-n;m=y*(1-A);l=y*(1-A*w);z=y*(1-A*(1-w));switch(n){case 0:k=y;u=z;x=m;break;case 1:k=l;u=y;x=m;break;case 2:k=m;u=y;x=z;break;case 3:k=m;u=l;x=y;break;case 4:k=z;u=m;x=y;break;default:k=y;u=m;x=l}}return{r:Math.round(k*255),g:Math.round(u*255),b:Math.round(x*255)}};var i=function(k,n,o){var l=Math.min(k,n,o);var p=Math.max(k,n,o);var t=p/255;var u=0;var m=-1;var q=p-l;if(p!==0){u=q/p;if(k===p){m=(n-o)/q}else{if(n===p){m=2+(o-k)/q}else{m=4+(k-n)/q}}}m*=60;while(m<0){m+=360}return{h:m,s:u,v:t}};var j=function(m,l,k){return Math.max(Math.min(m,k),l)};return{colorize:(function(){var k=function(m,l){if(typeof l.prepend!=="undefined"&&c.isFunction(l.prepend)){l.prepend(m)}};return{add:function(m,l){k(m,l);m.r=j(m.r+255*l.r,0,255);m.g=j(m.g+255*l.g,0,255);m.b=j(m.b+255*l.b,0,255)},multiply:function(m,l){k(m,l);m.r=j(m.r+m.r*l.r,0,255);m.g=j(m.g+m.g*l.g,0,255);m.b=j(m.b+m.b*l.b,0,255)},replace:function(m,l){k(m,l);if(l.r>=0){m.r=j(l.r*255,0,255)}if(l.g>=0){m.g=j(l.g*255,0,255)}if(l.b>=0){m.b=j(l.b*255,0,255)}}}})(),effect:(function(){return{inverse:function(k){k.r=255-k.r;k.g=255-k.g;k.b=255-k.b},solarize:function(m,l){var k=l.intensity(m);if(l.operator==="greater"&&k>=l.solarize){m.r=255-m.r;m.g=255-m.g;m.b=255-m.b}else{if(l.operator==="less"&&k<=l.solarize){m.r=255-m.r;m.g=255-m.g;m.b=255-m.b}}}}})(),hue:(function(){return{add:function(n,m){var l=i(n.r,n.g,n.b);l.h=(l.h+m.hue)%360;if(m.saturation>=0){l.s=(m.saturation/100)%1}if(m.value>=0){l.v=(m.value/100)%1}var k=h(l.h,l.s,l.v);n.r=k.r;n.g=k.g;n.b=k.b}}})(),intensity:(function(){return{average:function(k){return(k.r+k.g+k.b)/3},lightness:function(k){return(Math.max(k.r,k.g,k.b)+Math.min(k.r,k.g,k.b))/2},luminosity:function(k){return(k.r*0.2126+k.g*0.7152+k.b*0.0722)},natural:function(k){return(k.r*0.299+k.g*0.587+k.b*0.114)}}})(),opacity:(function(){return{add:function(l,k){l.a=j(l.a+255*k.opacity,0,255)},multiply:function(l,k){l.a=j(l.a+l.a*k.opacity,0,255)},replace:function(l,k){l.a=j(k.opacity*255,0,255)}}})()}})();var f=function(j){var i=document.createElement("canvas");i.width=j.naturalWidth;i.height=j.naturalHeight;i.getContext("2d").drawImage(j,0,0);var h=i.getContext("2d");var k=h.getImageData(0,0,j.naturalWidth,j.naturalHeight);return{canvas:i,context:h,image:k,data:k.data}};var g=function(p,k,q){for(var l=0;l<p.data.length;l+=4){var h=p.data[l];var m=p.data[l+1];var n=p.data[l+2];var o=p.data[l+3];var j={r:h,g:m,b:n,a:o};k(j,q);p.data[l]=j.r;p.data[l+1]=j.g;p.data[l+2]=j.b;p.data[l+3]=j.a}};return{colorimazer:function(m,l,j){var k=f(m);var i=null;switch(l){case"colorize":if(typeof j.grayscale!=="undefined"&&j.grayscale!==""){var h=this.grayscale({mode:j.grayscale});j.prepend=function(n){n.r=n.g=n.b=h(n)}}i=this.colorize(j);break;case"custom":i=j;break;case"grayscale":var h=this.grayscale(j);i=function(n){n.r=n.g=n.b=h(n)};break;case"hue":i=this.hue(j);break;case"effect":if(typeof j.intensity!=="undefined"&&j.intensity!==""){j.intensity=this.grayscale({mode:j.intensity})}i=this.effect(j);break;case"opacity":i=this.opacity(j);break}if(c.isFunction(i)){g(k,i,j);k.context.putImageData(k.image,0,0);m.src=k.canvas.toDataURL()}return m},colorize:function(h){switch(h.mode){case"replace":return e.colorize.replace;case"add":return e.colorize.add;case"multiply":return e.colorize.multiply}},effect:function(h){switch(h.mode){case"inverse":return e.effect.inverse;case"solarize":return e.effect.solarize}},grayscale:function(h){switch(h.mode){case"lightness":return e.intensity.lightness;case"luminosity":return e.intensity.luminosity;case"natural":return e.intensity.natural;default:return e.intensity.average}},hue:function(h){switch(h.mode){case"add":return e.hue.add}},opacity:function(h){switch(h.mode){case"replace":return e.opacity.replace;case"add":return e.opacity.add;case"multiply":return e.opacity.multiply}}}})();var d=(function(){return{colorize:function(e){if(c.isPlainObject(e)){if(typeof e.mode!=="undefined"){if(e.mode==="replace"){e=c.extend({},{r:-1,g:-1,b:-1},e)}}}e=c.extend({},{mode:"add",r:0,g:0,b:0},e);e.r/=100;e.g/=100;e.b/=100;return e},grayscale:function(e){e=c.extend({},{mode:"average"},e);return e},hue:function(f){var e=0;if(c.isNumeric(f)){e=f}f=c.extend({},{mode:"add",hue:e,saturation:-1,value:-1},f);while(f.hue<0){f.hue+=360}return f},inverse:function(e){e=c.extend({},{mode:"inverse"},e);return e},solarize:function(e){e=c.extend({},{mode:"solarize",intensity:"average",solarize:128,operator:"less"},e);return e},opacity:function(f){var e=0;if(c.isNumeric(f)){e=f}f=c.extend({},{opacity:e,mode:"replace"},f);f.opacity/=100;return f}}})();var b=function(g,f,e){return g.each(function(){if(c(this).is("img")){c(this).queue(function(){var i=new Image();var h=c(this);i.onload=function(){this.onload=null;a.colorimazer(this,f,e);h.one("load",function(){h.dequeue()});h.attr("src",this.src)};i.src=c(this).attr("src")})}})};c.extend(c.fn,{save:function(){return this.each(function(){if(c(this).hasClass("colorimazer-original-save")===false){var e=c(this).clone();e.attr("id",c(this).attr("id")+"-colorimazer");e.addClass("colorimazer-original-save");c(this).after(e);e.hide(0)}})},restore:function(){this.each(function(){if(c(this).hasClass("colorimazer-original-save")===false){c("#"+c(this).attr("id")+"-colorimazer").restore()}else{c("#"+c(this).attr("id").replace("-colorimazer","")).remove();c(this).attr("id",c(this).attr("id").replace("-colorimazer",""));c(this).show(0);c(this).removeClass("colorimazer-original-save")}});return c(this.selector)},colorize:function(e){return b(this,"colorize",d.colorize(e))},custom:function(e){if(c.isFunction(e)){return b(this,"custom",e)}},grayscale:function(e){return b(this,"grayscale",d.grayscale(e))},hue:function(e){return b(this,"hue",d.hue(e))},inverse:function(e){return b(this,"effect",d.inverse(e))},solarize:function(e){return b(this,"effect",d.solarize(e))},opacity:function(e){return b(this,"opacity",d.opacity(e))}})})(jQuery);